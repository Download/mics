{"version":3,"file":"mics.es.js","sources":["../src/index.js"],"sourcesContent":["var baseclass = class Object{},\r\n    derive = superclass => ({}[superclass.name || 'Object'] = class extends superclass {})\r\n\r\nexport function mix(...args){\r\n\tvar superclass = !is(args[0]).a('factory') && args.shift() || baseclass\r\n\tvar factory = (is(args[args.length-1]).a('factory') && args.pop()) || derive\r\n\tsuperclass = is(superclass).a('mixin') ? superclass.class : derive(superclass)\r\n\tif (args.length) factory = (org => superclass => org(args.reduce((s,m) => m.mixin(s), superclass)))(factory)\r\n\tfunction mixin(superclass) {\r\n\t\tvar result = is(superclass).a(mixin) ? superclass : factory(superclass) \r\n\t\tif (mixin.classes.indexOf(result) === -1) mixin.classes.push(result)\r\n\t\treturn result\r\n\t}\r\n\tObject.defineProperties(mixin, {\r\n\t\tclasses: {value:[], writable:false},\r\n\t\tmixins: {value:args, writable:false},\r\n\t})\r\n\tvar Class = mixin(superclass)\r\n\tvar constructor = Class.hasOwnProperty('constructor') ? Class.constructor.bind(Class) : (...args) => new Class(...args)\r\n\tObject.getOwnPropertyNames(Class).forEach(k => Object.defineProperty(constructor, k, {value: Class[k]}))\r\n\treturn Object.defineProperties(constructor, {\r\n\t\tmixin: {value:mixin, writable:false},\r\n\t\tclass: {value: Class, writable:false},\r\n\t\tinterface: {get:(x => () => x ? x : x = getInterface(Class.prototype))()},\r\n\t})\r\n}\r\n\r\nexport default mix\r\n\r\nexport function is(x, type) {\r\n\tfunction a(type) {\r\n\t\tif (typeof type == 'string') {\r\n\t\t\treturn type == 'class'   ? is(x).a('function') && (s => /^class\\s/.test(s) || /^.*classCallCheck\\(/.test(s.replace(/^[^{]*{\\s*/,'').replace(/\\s*}[^}]*$/,'')))(x.toString()) :\r\n\t\t\t       type == 'mixin'   ? is(x).a('function') && !!x.mixin :\r\n\t\t\t       type == 'factory' ? is(x).a('function') && !is(x).a('mixin') && !is(x).a('class') && x.length == 1 :\r\n\t\t\t\t\t\t typeof x == type;\r\n\t\t}\r\n\t\tif (typeof x == 'object') {\r\n\t\t\tif (x instanceof type) return true\r\n\t\t\tif (type.class && x instanceof type.class) return true\r\n\t\t\tif (type.mixin && type.mixin.classes) return type.mixin.classes.reduce((f,c) => f || a(c), false)\r\n\t\t}\r\n\t\telse if (typeof x == 'function') {\r\n\t\t\tif (x.mixin && x.mixin.mixins.indexOf(type) !== -1) return true\r\n\t\t\tvar c = x\r\n\t\t\twhile (c !== Object) {\r\n\t\t\t\tif (c === type || c === type.class) return true\r\n\t\t\t\tif (type.mixin && type.mixin.classes && type.mixin.classes.indexOf(c) !== -1) return true\r\n\t\t\t\tc = c.prototype.__proto__.constructor\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\tfunction as(type) {\r\n\t\tif (a(type)) return true\r\n\t\tvar itf = type.interface || (is(type, 'function') && getInterface(type.prototype))\r\n\t\tvar subject = is(x, 'function') ? x.interface || getInterface(x.prototype) : x\r\n\t\treturn itf && Object.keys(itf).reduce((f, k) => \r\n\t\t\tf && (is(itf[k], 'function') ? is(subject[k], 'function') : k in subject), true\r\n\t\t)\r\n\t}\r\n\r\n\tvar str = x && x.toString() || ''\r\n\treturn type !== undefined ? a(type) : {a, an:a, as}\r\n}\r\n\r\nfunction getPropertyNames(proto) {\r\n\tvar results = []\r\n\twhile (proto !== Object.prototype) {\r\n\t\tObject.getOwnPropertyNames(proto).reduce((arr,k) => arr.indexOf(k) === -1 ? arr.push(k) && arr : arr, results)\r\n\t\tproto = proto.__proto__.constructor.prototype\r\n\t}\r\n\treturn results\r\n}\r\n\r\nfunction getInterface(proto) {\r\n\treturn getPropertyNames(proto).reduce((o,k) => {o[k] = proto[k]; return o}, {})\r\n}\r\n"],"names":["baseclass","derive","superclass","name","mix","args","is","a","shift","factory","length","pop","class","org","reduce","s","m","mixin","result","classes","indexOf","push","defineProperties","value","writable","Class","constructor","hasOwnProperty","bind","getOwnPropertyNames","forEach","Object","defineProperty","k","get","x","getInterface","prototype","type","test","replace","toString","f","c","mixins","__proto__","as","itf","interface","subject","keys","str","undefined","an","getPropertyNames","proto","results","arr","o"],"mappings":"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"}